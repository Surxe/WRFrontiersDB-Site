---
import langs from '../../public/langs.json';

export interface Props {
  title?: string;
}

const { title } = Astro.props;

// Basic page layout
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="WRFrontiersDB - War Robots Frontiers Database"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href={`${import.meta.env.BASE_URL}favicon.svg`}
    />
    {title && <title>{title}</title>}
    <slot name="head" />
  </head>
  <body>
    <select id="lang-selector">
      {
        Object.entries(langs).map(([code, names]) => (
          <option value={code} selected={code === 'en'}>
            {(names as any)[code]}
          </option>
        ))
      }
    </select>
    <slot />
    <script is:inline define:vars={{ basePath: import.meta.env.BASE_URL }}>
      // Make base path available to all JavaScript modules
      window.__ASTRO_BASE_PATH__ = basePath;
    </script>
    <script type="module">
      import { initLanguageSelector } from `${import.meta.env.BASE_URL}js/language_selector.js`;

      // Initialize language selector with default behavior (reload on change)
      initLanguageSelector();
    </script>
  </body>
</html>
