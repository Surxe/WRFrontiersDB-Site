---
import langs from '../../public/langs.json';

export interface Props {
  title?: string;
}

const { title } = Astro.props;

// Basic page layout
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="WRFrontiersDB - War Robots Frontiers Database"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    {title && <title>{title}</title>}
    <slot name="head" />
  </head>
  <body>
    <select id="lang-selector">
      {
        Object.entries(langs).map(([code, names]) => (
          <option value={code} selected={code === 'en'}>
            {(names as any)[code]}
          </option>
        ))
      }
    </select>
    <slot />
    <script type="module">
      const languageModule = await import('/js/language_selector.js');
      const { initLanguageSelector } = languageModule;

      // Initialize language selector with default behavior (reload on change)
      initLanguageSelector();
    </script>
  </body>
</html>
