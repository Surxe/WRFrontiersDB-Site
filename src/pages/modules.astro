---
import fs from 'fs';
import path from 'path';
import ParseObjectList from '../components/ParseObjectList.astro';
import BackToHome from '../components/BackToHome.astro';

// Load version metadata to find the latest version
const versionsPath = path.join(process.cwd(), 'WRFrontiersDB-Data/versions.json');
const versions = JSON.parse(fs.readFileSync(versionsPath, 'utf8'));

// Get the latest version (first in the object since they're sorted by date DESC)
const latestVersion = Object.keys(versions)[0];
---

<html>
  <head>
    <title>Modules</title>
  </head>
  <body>
    <BackToHome />
    <h1>Modules</h1>
    
    <p>Showing modules from latest version: {versions[latestVersion].title} ({latestVersion})</p>

    <ParseObjectList 
      parseObjectFile="Objects/Module.json" 
      parseObjectUrl="modules" 
      version={latestVersion}
      prodReadyOnly={true} 
    />
  </body>
</html>